<!DOCTYPE html><html lang="en"><head><title>WRStat Logs</title><link rel="shortcut icon" sizes="any" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'%3E%3Cdefs%3E%3Cpath id='b' d='M10,105 c-31,37 84,57 101,88 c33,-22 -87,-56 -101,-88 z' stroke='%23000' stroke-width='3' /%3E%3Cpath id='t' d='M106,0 c53,42 -142,52 -98,127 c-24,-60 176,-65 98,-127 z' stroke='%23000' stroke-width='3' /%3E%3C/defs%3E%3Crect width='100%25' height='100%25' fill='%23074987' /%3E%3Cg%3E%3CanimateTransform attributeName='transform' attributeType='XML' type='translate' from='0 0' to='0 170' dur='5s' begin='click' repeatCount='indefinite' /%3E%3Cuse href='%23b' x='37' y='-195' fill='%23d2ecf5' /%3E%3Cuse href='%23b' x='37' y='-25' fill='%23d2ecf5' /%3E%3Cuse href='%23b' x='37' y='-255' fill='%2374c2dd' /%3E%3Cuse href='%23b' x='37' y='-85' fill='%2374c2dd' /%3E%3Cuse href='%23b' x='37' y='85' fill='%2374c2dd' /%3E%3Cuse href='%23t' x='37' y='-85' fill='%2374c2ff' /%3E%3Cuse href='%23t' x='37' y='-255' fill='%2374c2ff' /%3E%3Cuse href='%23t' x='37' y='85' fill='%2374c2ff' /%3E%3Cuse href='%23t' x='37' y='-195' fill='%23bbddff' /%3E%3Cuse href='%23t' x='37' y='-25' fill='%23bbddff' /%3E%3Cuse href='%23t' x='37' y='145' fill='%23bbddff' /%3E%3C/g%3E%3C/svg%3E" /><style type="text/css">.expandErrors {cursor: pointer;list-style: none;user-select: none;}.expandErrors:before, .expandErrors:after {content: ".\00000a.\00000a.";display: block;white-space: pre;line-height: 0.5em;}.tabs {position: relative;display: flex;flex-wrap: wrap;line-height: 24px;width: 100%;--tabBGFrom: #ececec;--tabBGTo: #d1d1d1;--tabHoverBGFrom: #428bca;--tabHoverBGMid: color-mix(in srgb, #428bca 25%, #fff);--tabHoverBGTo: #d1d1d1;--tabShadow: #d1d1d1;--tabSelectedBG: #fff;--tabSelectedFont: currentColor;}.tabs:before {order: -1;content: "";width: 20px;display: block;}.tabs:after {content: "";width: calc(100% + 20px);transform: translateX(-20px);z-index: 1;margin-top: -1px;border-top: 1px solid currentColor;border-bottom: 2px solid #fff;order: -1;}.tabs > details {display: contents;}.tabs > details:first-child > summary {order: -1;padding-left: 20px;}.tabs > details > summary {order: -1;display: block;border-width: 1px;border-style: solid;position: relative;z-index: 1;margin: 0 -5px;padding: 0 20px;border-top-right-radius: 6px;border-top-left-radius: 6px;background: linear-gradient(to bottom, var(--tabBGFrom) 50%, var(--tabBGTo) 100%);text-shadow: 0 1px var(--background);border-color: currentColor;cursor: pointer;user-select: none;}.tabs > details > summary:hover, .tabs > details > summary:focus {outline: none;background: linear-gradient(to bottom, var(--tabHoverBGFrom) 1%, var(--tabHoverBGMid) 50%, var(--tabHoverBGTo) 100%);}.tabs > details > :not(summary) {order: 2;width: 100vw;}.tabs > details > summary:before {left: -7px;border-bottom-right-radius: 6px;border-width: 0px 1px 1px 0px;box-shadow: 2px 2px 0 var(--tabShadow);}.tabs > details > summary:after {right: -7px;border-bottom-left-radius: 6px;border-width: 0px 0px 1px 1px;box-shadow: -2px 2px 0 var(--tabShadow);}.tabs > details > summary:after, .tabs > details > summary:before {content: "";position: absolute;bottom: -1px;width: 6px;height: 6px;border-style: solid;border-color: currentcolor;}.tabs > details[open] > summary:before {box-shadow: 2px 2px 0 var(--tabSelectedBG);}.tabs > details[open] > summary {z-index: 2;cursor: default !important;border-bottom-color: var(--tabSelectedBG) !important;background: var(--tabSelectedBG) !important;pointer-events: none;}.tabs > details[open] > summary:after {box-shadow: -2px 2px 0 var(--tabSelectedBG);}.graphKey {list-style: none;padding: 0;}.graphKey > li {display: inline-block;margin-right: 2em;}.graphKey > li :first-child {display: inline-block;border: 1px solid #000;width: 1em;height: 1em;margin-right: 0.5em;margin-bottom: -0.25em;}svg {display: block;height: 90vh;cursor: zoom-out;}svg.zoom {cursor: zoom-in;width: 100%;height: auto;}.syscalls .syscalls, .opens .opens, .reads .reads, .bytes .bytes, .closes .closes, .stats .stats, .writes .writes, .writeBytes .writeBytes {display: none;}body > select:hover {position: relative;height: 20em;}</style><script type="module">const e=(e,t,s)=>{const[o,r]="string"==typeof t||t instanceof Node||t instanceof Array?[{},t]:[t,s??[]];return Object.entries(o).forEach((([t,s])=>e[s instanceof Function?"addEventListener":"setAttribute"](t,s))),e.append(...[r].flat(1/0)),e},t=t=>new Proxy({},{get:(s,o)=>(s={},r)=>e(document.createElementNS(t,o),s,r)}),{br:s,details:o,div:r,h2:n,input:a,label:l,li:i,optgroup:c,option:m,select:f,span:p,summary:h,ul:y}=t("http://www.w3.org/1999/xhtml"),{g:u,line:d,polyline:g,svg:w,text:v}=t("http://www.w3.org/2000/svg"),x=r(),b=e=>{const t=new Date(1e3*e);return t.toLocaleDateString()+" "+t.toLocaleTimeString()},S=["syscalls","opens","reads","closes","stats","writes","bytes","writeBytes"],k=["#000","#0f0","#00f","#f80","#f0f","#851","#f00","#f88"],L=(e=0)=>({time:e,opens:0,reads:0,bytes:0,closes:0,stats:0,syscalls:0,writes:0,writeBytes:0}),B=function*(e,t,s){for(let o=e;o<=t;o++)yield s(o)},M=200,T=(e,t,s)=>{const o=new Map(B(t,s,(e=>[e,L(e)]))),r=new Map;for(const t of e){const e=t.time/60|0,s=r.get(t.file)??L(t.time-60);r.set(t.file,t);for(const r of S){if(!t[r])continue;const n=0===s[r]?e-1:s.time/60|0,a=t[r]/(e-n);for(const t of B(n+1,e,(e=>e))){const e=o.get(t);e[r]+=a,"ytes"!==r.slice(-4)&&(e.syscalls+=a)}}}return o},$=e=>{const t=Math.pow(10,Math.floor(Math.log10(e)));return Math.ceil(10*e/t)*t/10},A=e=>{const t=[0,0];for(const[,s]of e)t[0]=Math.max(t[0],s.syscalls),t[1]=Math.max(t[1],s.bytes,s.writeBytes);return t[0]=$(t[0]),t[1]=$(t[1]),t},E=["","k","M","G","T","P","E","Z","R","Y","Q"],j=e=>{for(const t of E){if(e<1e3)return e+t;e=Math.floor(e/100)/10}return"∞"},C=(e,t,s,o,r,n)=>{const a=T(e,t,s),l=S.map((()=>[]));n||([o,r]=A(a));for(const[,e]of a)for(const[t,s]of S.entries())l[t].push([e.time,e[s]]);for(const e of l)for(;0===e.at(-1)?.[1];)e.pop();return w({viewBox:`0 0 ${s-t+160} 310`,click:function(){this.classList.toggle("zoom")}},[u({transform:"translate(15 10)"},[u({transform:"translate(60 5)"},[l.slice(6).map(((e,s)=>g({points:e.map((([e,s])=>`${e-t},${M-M*s/r}`)).join(" "),stroke:k[6+s],fill:"none",class:S[6+s]}))),l.slice(0,6).map(((e,s)=>g({points:e.map((([e,s])=>`${e-t},${M-M*s/o}`)).join(" "),stroke:k[s],fill:"none",class:S[s]}))),d({y1:M+"",y2:M+"",x2:s-t+10+"",stroke:"#000"}),Array.from(B(Math.ceil(t/60),Math.floor(s/60),(e=>v({transform:`translate(${60*e-t}, 205) rotate(90) scale(0.5)`},b(3600*e)))))]),u({style:"transform-box: fill-box; transform-origin: center; transform: translate(-65px, 100px) rotate(-90deg)"},v("Syscalls per Minute")),u({style:"transform-box: fill-box; transform-origin: center; transform: translate("+(s-t+90)+"px, 100px) rotate(90deg)"},v("Bytes per Minute")),d({x1:"60",x2:"60",y2:"205",stroke:"#000"}),Array.from(B(0,5,(e=>v({x:"50",y:40*(5-e)+10+"","text-anchor":"end"},j(e*o/5))))),d({x1:s-t+70+"",x2:s-t+70+"",y2:"205",stroke:"#000"}),Array.from(B(0,5,(e=>v({x:s-t+80+"",y:40*(5-e)+10+""},(j(e*r/5)+"iB").replace(/([0-9])iB/,"$1B")))))])])},P=e=>i(`${b(e.time)}, ${e.file} (${e.host}): ${e.message}`),R=(t,c)=>{let u,d=!0,g=c.events;const{opens:w,reads:v,bytes:B,closes:M,stats:$,writes:E,writeBytes:j}=c.events.reduce(((e,t)=>(e.opens+=t.opens??0,e.reads+=t.reads??0,e.bytes+=t.bytes??0,e.closes+=t.closes??0,e.stats+=t.stats??0,e.writes+=t.writes??0,e.writeBytes+=t.writeBytes??0,e)),L()),R=c.events[0].time/60|0,W=c.events.at(-1).time/60|0,[Y,N]=A(T(c.events,R,W)),O=r([f({change:function(){u.replaceWith(u=C(g="..."===this.value?c.events:c.events.filter((e=>e.host===this.value)),R,W,Y,N,d))}},[m({value:"..."},"-- All Hosts --"),Array.from(c.events.reduce(((e,t)=>(e.add(t.host),e)),new Set)).sort().map((e=>m(e)))]),s(),l({for:"uniformY"},"Uniform Y-axis: "),a({id:"uniformY",checked:"checked",type:"checkbox",click:function(){u.replaceWith(u=C(g,R,W,Y,N,d=this.checked))}}),y({class:"graphKey"},S.map(((e,t)=>i([p({style:"background-color: "+k[t],click:function(){this.setAttribute("style",O.classList.toggle(S[t])?"":`background-color: ${k[t]}`)}}),p(e.at(0).toUpperCase()+e.slice(1))])))),u=C(g,R,W,Y,N,d)]);((t,s={},o)=>{e((t.replaceChildren(),t),s,o)})(x,[n(t),r({class:"tabs"},[o({name:"tabs",open:"open"},[h("Summary"),r([r("Run start time: "+b(c.events.at(0)?.time??0)),r("Run end time: "+b(c.events.at(-1)?.time??0)),r("Total Syscalls: "+(w+v+M+$).toLocaleString()),r("Total Opens: "+w.toLocaleString()),r("Total Reads: "+v.toLocaleString()),r("Total Bytes Read: "+B.toLocaleString()),r("Total Close: "+M.toLocaleString()),r("Total Stats: "+$.toLocaleString()),r("Total Writes: "+E.toLocaleString()),r("Total Bytes Written: "+j.toLocaleString()),r("Total Errors: "+(c.errors?.length??0).toLocaleString())])]),0===(c.errors?.length??0)?[]:o({name:"tabs"},[h("Errors"),y(c.errors.length>7?[c.errors.slice(0,3).map((e=>P(e))),i({class:"expandErrors",click:function(){this.replaceWith(...c.errors.slice(3,-3).map((e=>P(e))))}},"Click here to expand remaining errors"),c.errors.slice(-3).map((e=>P(e)))]:c.errors.map((e=>P(e))))]),o({name:"tabs"},[h("Charts"),O])])])},W=(e,t)=>e.time-t.time;("complete"===document.readyState?Promise.resolve():new Promise((e=>window.addEventListener("load",e,{once:!0})))).then((()=>fetch("/data.json"))).then((e=>e.json())).then((t=>{var s;e(document.body,[f({multiple:"multiple",change:function(){const e=Array.from(this.getElementsByTagName("option")).filter((e=>e.selected)).map((e=>e.value));0===e.length?x.replaceChildren():Promise.all(e.map((e=>fetch("/logs/"+encodeURIComponent(e)).then((e=>e.json())).then((t=>[e,t]))))).then((t=>{R(e.join(", "),t.reduce(((e,[t,s])=>(e.events=e.events.concat((s?.events??[]).map((e=>(e.file+="/"+t+"/",e)))).sort(W),e.errors=e.errors.concat(s?.errors??[]).sort(W),e.complete&&=s.complete,e)),{events:[],errors:[],complete:!0}))}))}},c({label:"Please select one or more runs"},[(s=Object.entries(t).map((([e,t])=>m({value:e},(t.complete?"✓ ":"❌ ")+e))),s.reverse(),s)])),x])}));</script></head><body></body></html>